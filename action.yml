name: 'GitHub Actions Pinner'
description: 'Validate GitHub Actions to ensure they use specific commit SHAs for improved security'
author: 'gha-pinner'
branding:
  icon: 'anchor'
  color: 'blue'

inputs:
  target:
    description: 'File or directory to validate actions in'
    required: true
    default: '.github/workflows'
  target-type:
    description: 'Type of target (file or dir)'
    required: false
    default: 'dir'
    enum: ['file', 'dir']

runs:
  using: 'composite'
  steps:
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
        cache: 'pip'

    - name: Install gha-pinner
      shell: bash
      run: |
        pip install ${{ github.action_path }}

    - name: Validate GitHub Actions
      shell: bash
      run: |
        gha-pinner ${{ inputs.target-type }} "${{ inputs.target }}" --validate
